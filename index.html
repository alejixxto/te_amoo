<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para ti</title>

<style>
html,body{
    margin:0;
    height:100%;
    overflow:hidden;
    background:url("fondo.png") center/cover no-repeat fixed;
    font-family:Georgia,serif;
}

/* capa donde viven las flores */
.escena{
    position:fixed;
    inset:0;
}

/* flores */
.flor{
    position:absolute;
    width:140px;
    transform:translate(-50%,-50%);
    pointer-events:none;
    will-change:transform;
}
</style>
</head>
<body>

<div class="escena"></div>

<audio id="bg-music" loop preload="auto">
    <source src="musica.mp3" type="audio/mpeg">
</audio>

<script>

const flores = ["flor blanca.png","flor rosa.png","girasol.png"];
const container = document.querySelector(".escena");

const posiciones = [
 {x:44.47, y:48.15, s:1.0},
 {x:52.67, y:41.38, s:0.95},
 {x:56.18, y:48.89, s:1.05},
 {x:50.40, y:58.20, s:1.1},
 {x:42.56, y:56.40, s:0.9},
 {x:41.31, y:45.29, s:0.95},
 {x:47.03, y:44.02, s:1.0}
];

posiciones.forEach(pos => {

    let flor = document.createElement("img");
    flor.src = flores[Math.floor(Math.random()*flores.length)];
    flor.className = "flor";

    let variacionX = (Math.random()*4)-2;     // -2 a +2
    let variacionY = (Math.random()*3)-1.5;   // -1.5 a +1.5

    flor.style.left = (pos.x + variacionX) + "%";
    flor.style.top = (pos.y + variacionY) + "%";

    let rotacion = (pos.x - 50) / 4;
    flor.style.transform = `translate(-50%,-50%) scale(${pos.s}) rotate(${rotacion}deg)`;
    flor.style.zIndex = Math.floor(pos.y);

    container.appendChild(flor);
});

</script>

<script>
const music = document.getElementById("bg-music");

function intentarReproducir(){
    music.volume = 0.6;
    music.play().catch(()=>{
        document.addEventListener("click", iniciar, {once:true});
        document.addEventListener("touchstart", iniciar, {once:true});
    });
}

function iniciar(){
    music.play();
}

window.addEventListener("load", intentarReproducir);
</script>

</body>
</html>
